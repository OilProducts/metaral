// Final position update after pressure/viscosity.
#version 450
#include "fluid_common.glsl"

layout(local_size_x = 256, local_size_y = 1, local_size_z = 1) in;

void main() {
    int i = particleIndex();
    if (i < 0) return;
    Particle p = positions_out.particles[i];
    p.position.xyz += p.velocity.xyz * params.deltaTime;
    positions_out.particles[i] = p;
}
